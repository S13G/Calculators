<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Steward Well Capital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="./css/style.css" />
  <link href="css/normalize.css" rel="stylesheet" type="text/css" />
  <link href="css/webflow.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <link href="css/stewardwellcapital.webflow.css" rel="stylesheet" type="text/css" />
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#6366f1",
            secondary: "#8b5cf6",
            accent: "#06b6d4",
            dark: "#0f172a",
            "dark-light": "#1e293b",
          },
          animation: {
            "fade-in": "fadeIn 0.5s ease-in-out",
            "slide-up": "slideUp 0.3s ease-out",
            "slide-down": "slideDown 0.3s ease-out",
            glow: "glow 2s ease-in-out infinite alternate",
          },
        },
      },
    };
  </script>
  <style>
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideUp {
      from {
        transform: translateY(30px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideDown {
      from {
        transform: translateY(-10px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes glow {
      from {
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
      }

      to {
        box-shadow: 0 0 30px rgba(99, 102, 241, 0.6);
      }
    }

    .gradient-text {
      background-image: linear-gradient(to right,
          var(--base-color-brand--brand-green),
          var(--base-color-system--focus-state));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
      font-size: clamp(1.15rem, 2.5vw, 1.5rem);
    }

    @media print {

      /* Ensure colors render in print */
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      /* Hide everything by default */
      body * {
        visibility: hidden;
      }

      /* Show only the Taxes tab content and make it fill the page */
      #taxes-content,
      #taxes-content * {
        visibility: visible;
      }

      #taxes-content {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        padding: 24px;
      }

      /* Optional: hide the nav tabs and the print button during print */
      #deductions-nav,
      #print-download-btn {
        display: none !important;
      }
    }

    /* Make the print/download button icon white */
    #print-download-btn svg {
      color: #fff !important;
      stroke: #fff !important;
    }

    #print-download-btn path {
      stroke: #fff !important;
    }

    @media print {

      /* Ensure colors render in print */
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      /* Hide everything by default */
      body * {
        visibility: hidden;
      }

      /* Show only the Taxes tab content and make it fill the page */
      #taxes-content,
      #taxes-content * {
        visibility: visible;
      }

      #taxes-content {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        padding: 24px;
      }

      /* Optional: hide the nav tabs and the print button during print */
      #deductions-nav,
      #print-download-btn {
        display: none !important;
      }
    }

    input {
      -moz-appearance: textfield;
      /* Firefox */
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      /* Chrome, Safari, Edge */
      margin: 0;
    }

    .nav_cta {
      background-color: #000;
      background-image: linear-gradient(135deg,
          var(--base-color-brand--brand-green),
          #16418a);
      color: var(--text-color--text-alternate);
      text-align: center;
      text-transform: uppercase;
      border-radius: 0.4rem;
      padding: 0.75rem 2rem;
      font-size: 1rem;
      font-weight: 500;
      text-decoration: none;
      transition: background-color 0.5s;
    }

    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Active button styling */
    button.active {
      box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
      transform: scale(1.05);
    }

    .input-glow:focus {
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1),
        0 0 20px rgba(99, 102, 241, 0.2);
    }

    /* Calculator Dropdown Styles */
    .calculator-dropdown {
      position: relative;
      display: inline-block;
    }

    .menu_links-wrapper {
      display: flex;
      align-items: center;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .nav_menu_link {
      display: inline-block;
    }

    .dropdown-content {
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      min-width: 300px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      border-radius: 12px;
      padding: 8px 0;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: all 0.3s ease;
      border: 1px solid rgba(0, 0, 0, 0.1);
    }

    .dropdown-content.show {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
      animation: slideDown 0.3s ease-out;
    }

    .dropdown-item {
      display: block;
      padding: 12px 20px;
      color: #374151;
      text-decoration: none;
      transition: all 0.2s ease;
      border-bottom: 1px solid #f3f4f6;
      font-weight: 500;
    }

    .dropdown-item:last-child {
      border-bottom: none;
    }

    .dropdown-item:hover {
      background-color: #f8fafc;
      color: #6366f1;
      transform: translateX(4px);
    }

    .dropdown-item.active {
      background-color: #e0e7ff;
      color: #6366f1;
      font-weight: 600;
    }

    .calculator-dropdown:hover .dropdown-content {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    .nav_menu_link {
      position: relative;
      transition: color 0.3s ease;
    }

    .nav_menu_link:hover {
      color: #6366f1;
    }

    .dropdown-arrow {
      display: inline-block;
      margin-left: 6px;
      transition: transform 0.3s ease;
    }

    .calculator-dropdown:hover .dropdown-arrow {
      transform: rotate(180deg);
    }

    /* Background for the "Your Income" container */
    #annual-income-section .glass-effect {
      background-color: #e6f2e6;
      /* Soft Muted Green */
    }

    /* Background for the "Tax Deductions & Income Overview" container */
    #deductions-disposable-section {
      background-color: white;
      /* Light Airy Blue */
    }

    /* Background for the "Monthly Living Expenses" container */
    #living-expenses-section {
      background-color: white;
      /* Gentle Warm Sand */
    }

    /* We also need to adjust the text color for better readability on the new backgrounds */
    #main-calculator-card h1,
    #main-calculator-card h2,
    #main-calculator-card h3,
    #main-calculator-card p,
    #main-calculator-card label,
    #main-calculator-card button,
    #main-calculator-card span,
    #main-calculator-card div,
    #main-calculator-card a {
      color: #0f172a;
      /* A dark color like 'dark' from your tailwind config */
    }

    /* Make sure input fields have dark text too */
    .input-field,
    #dropdownSelected {
      color: #0f172a !important;
    }

    .input-field {
      background-color: #dfece6;
    }

    /* The dropdown list needs a background and dark text */
    #customProvinceOptions {
      background-color: #ffffff;
      color: #0f172a;
    }

    #customProvinceOptions li:hover {
      background-color: #f1f5f3;
    }

    /* Adjusting some specific elements that were styled for a dark background */
    .text-white {
      color: #0f172a;
    }

    /* Force white text specifically for the print/download button */
    #print-download-btn span {
      color: #fff !important;
      -webkit-text-fill-color: #fff !important;
    }

    .text-white\/80 {
      color: rgba(15, 23, 42, 0.8);
    }

    .text-gray-300 {
      color: #475569;
      /* A medium gray */
    }

    .text-red-400 {
      color: #ef4444;
      /* Keep error/deduction colors */
    }

    .text-green-400 {
      color: #22c55e;
      /* Keep income colors */
    }

    .text-blue-400 {
      color: #3b82f6;
      /* Keep monthly income colors */
    }

    .category-toggle:hover {
      filter: brightness(0.95);
    }

    .tooltip-text {
      color: #0f172a;
      /* dark color */
    }

    /* Mobile responsive for dropdown */
    @media (max-width: 768px) {
      .dropdown-content {
        min-width: 280px;
        left: 0;
        width: 100%;
      }

      .menu_links-wrapper {
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .lite-header {
        display: block !important;
      }

      .dropdown-item {
        padding: 10px 15px;
        font-size: 14px;
      }

      .dropdown-item>div>div:last-child {
        font-size: 11px !important;
      }

      #main-calculator-card h2,
      #main-calculator-card h3 {
        letter-spacing: 0.025em;
        /* Adjust as needed */
      }
    }

    @media (max-width: 640px) {
      .input-group.flex {
        gap-x: 10px !important;
        /* Reduce gap for very small screens */
      }
    }

    @media (min-width: 992px) {
      .lite-header {
        display: none !important;
      }
    }

    .expense-summary-row {
      display: flex;
      /* Tailwind already sets this; keep for non-TW contexts */
      align-items: baseline;
      /* Align text nicely like the screenshot */
    }

    .expense-summary-row>div {
      display: flex;
      align-items: baseline;
      flex: 1;
      /* Let the left block grow to make room for the dotted leader */
    }

    .expense-summary-name {
      font-weight: 300;
      color: #333434;
    }

    .expense-summary-line {
      flex: 1;
      border-top: 3px dashed #dbece6;
      /* Soft mint dashed leader line */
      opacity: 0.9;
      margin: 0 16px;
      /* Breathing space around the leader */
    }

    .expense-summary-amount {
      background-image: linear-gradient(to right,
          var(--base-color-brand--brand-green),
          var(--base-color-system--focus-state));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
      font-size: 1 rem;
      /* Size similar to screenshot */
    }
  </style>
</head>

<body class="min-h-screen bg-[#C7DFD2]">
  <div class="nav_fixed">
    <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="nav_component w-nav">
      <div class="padding-global">
        <div class="nav_container">
          <a href="index.html" aria-current="page" class="nav_brand w-nav-brand w--current"><img src="images/Logo.svg" loading="lazy" alt="Steward Well Capital Logo" class="nav_logo" /></a>
          <nav role="navigation" class="nav_menu w-nav-menu">
            <div class="menu_links-wrapper">
              <div class="lite-header" style="display: none">Menu</div>
              <a href="index.html#about-us" class="nav_menu_link w-nav-link">About us</a>
              <a href="index.html#services" class="nav_menu_link w-nav-link">Services</a>
              <a href="./index.html#testimonials" class="nav_menu_link w-nav-link">Testimonials</a>

              <div class="calculator-dropdown" style="display: inline-block">
                <a href="#" class="nav_menu_link w-nav-link" id="calculatorToggle" style="display: inline-flex; align-items: center">
                  Calculators
                  <span class="dropdown-arrow">
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </span>
                </a>
                <div class="dropdown-content" id="calculatorDropdown">
                  <a href="budget-calculator.html" class="dropdown-item active">
                    <div>
                      <div style="font-weight: 600; margin-bottom: 2px">
                        Budgeting & Cashflow Calculator
                      </div>

                      <style>
                        .chart-btn-active {
                          transform: scale(1.1);
                          box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
                        }

                        .chart-btn-inactive {
                          transform: scale(0.95);
                          opacity: 0.7;
                        }

                        .chart-btn:hover {
                          transform: scale(1.05) !important;
                          opacity: 1 !important;
                        }
                      </style>
                      <div style="font-size: 12px; color: #6b7280">
                        Manage your monthly budget and cash flow
                      </div>
                    </div>
                  </a>
                  <a href="./networth-and-investment.html" class="dropdown-item">
                    <div>
                      <div style="font-weight: 600; margin-bottom: 2px">
                        Networth and investment Calculator
                      </div>
                      <div style="font-size: 12px; color: #6b7280">
                        Track and manage your networth
                      </div>
                    </div>
                  </a>
                  <a href="#" class="dropdown-item">
                    <div>
                      <div style="font-weight: 600; margin-bottom: 2px">
                        Debt & Credit Management Calculator
                      </div>
                      <div style="font-size: 12px; color: #6b7280">
                        Track and manage your debt payments
                      </div>
                    </div>
                  </a>
                  <a href="#" class="dropdown-item">
                    <div>
                      <div style="font-weight: 600; margin-bottom: 2px">
                        Protection & Legacy Planning Calculator
                      </div>
                      <div style="font-size: 12px; color: #6b7280">
                        Plan for insurance and estate needs
                      </div>
                    </div>
                  </a>
                </div>
              </div>

              <a href="index.html#contact-us" class="nav_menu_link w-nav-link">Contact us</a>
              <a href="index.html#contact-us" class="nav_cta hide-desktop">Talk to an expert</a>
            </div>
            <div class="menu_socials hide-desktop">
              <div class="lite-header">Follow us</div>
              <div class="menu_socials_content">
                <a href="https://www.instagram.com/stewardwellcapital?igsh=MW11eG1panppNXF0Mg%3D%3D&amp;utm_source=qr" target="_blank" class="social-link-wrapper w-inline-block"><img src="images/IG_1.svg" loading="lazy" alt="" class="menu_socials_icons" /></a>
                <a href="https://x.com/stewardwellcap?s=11" target="_blank" class="social-link-wrapper w-inline-block"><img src="images/X_1.svg" loading="lazy" alt="" class="menu_socials_icons" /></a>
                <a href="#" class="social-link-wrapper hide w-inline-block"><img src="images/FB_1.svg" loading="lazy" alt="" class="menu_socials_icons" /></a>
                <a href="https://www.linkedin.com/company/stewardwell-capital/" target="_blank" class="social-link-wrapper w-inline-block"><img src="images/LI_1.svg" loading="lazy" alt="" class="menu_socials_icons" /></a>
              </div>
            </div>
          </nav>
          <a href="index.html#contact-us" class="nav_cta hide-tablet">Talk to an expert</a>
          <div data-w-id="396176c6-906a-9f74-c6d0-8a4663dfdeb3" class="nav_button w-nav-button">
            <div class="nav_menu-line _1"></div>
            <div class="nav_menu-line _2"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="main-calculator-card" class="max-w-[80rem] flex flex-col relative mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Hero Section -->
    <div class="text-left mt-24 mb-12 animate-fade-in">
      <h2 class="text-4xl md:text-5xl font-bold text-white md:leading-loose">
        Budgeting & Cashflow Calculator
      </h2>
      <div class="opacity-50 -mt-1 w-[60%]">
        This tool helps you see your cashflow clearly, set purposeful
        allocations, and view projections—simple budgeting that highlights
        trends, flags overspending, and shows progress toward your goals.
      </div>
    </div>

    <div class="flex flex-col lg:flex-row gap-4 justify-center">
      <!-- ÷first place i need to fix -->
      <!-- Annual Income Input -->
      <div class="w-full lg:w-[60%]">
        <section id="annual-income-section" class="">
          <div class="rounded-tr-3xl rounded-tl-3xl p-8 bg-white border-white/10 hover:border-primary/30 transition-all duration-300">
            <div class="flex items-center space-x-3 mb-6">
              <img src="images/income.svg" alt="Income Icon" class="w-12 h-12 text-white" />
              <h2 class="text-[1.8rem] font-medium text-white">Income</h2>
            </div>

            <div class="relative">
              <div class="input-group grid grid-cols-2 max-sm:grid-cols-1 w-full gap-x-8 gap-y-5">
                <!-- Hidden real select -->
                <select id="provinceSelect" class="hidden">
                  <option value="">Choose your province...</option>
                </select>

                <!-- Custom dropdown UI -->
                <div class="relative w-full">
                  <label for="annualIncome" class="block text-sm font-medium text-gray-300 mb-2">Province</label>
                  <button id="dropdownBtn" type="button" class="w-[100%] pl-8 pr-4 flex justify-between py-4 border bg-[#dfece6] opacity-70 rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-[#f1f5f3] transition-all duration-200">
                    <span id="dropdownSelected">Choose province</span>
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                  </button>
                  <p id="provinceError" class="error-message text-red-500 text-sm mt-2"></p>

                  <ul id="customProvinceOptions" class="glass-effect p-2 t w-full text-white rounded-2xl mt-2 z-50 max-h-60 overflow-y-auto" style="
                        max-height: 0;
                        overflow: hidden;
                        opacity: 0;
                        transition: max-height 0.5s ease-in-out,
                          opacity 0.5s ease-in-out;
                      ">
                    <!-- dynamic <li>s will be injected here -->
                  </ul>
                </div>

                <div class="relative w-full">
                  <label for="ageRange" class="block text-sm font-medium text-gray-300 mb-2">Age</label>
                  <button id="ageDropdownBtn" type="button" class="w-[100%] pl-8 pr-4 flex justify-between py-4 border bg-[#dfece6] opacity-70 rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-[#f1f5f3] transition-all duration-200">
                    <span id="ageDropdownSelected">Choose age range</span>
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                  </button>
                  <p id="ageRangeError" class="error-message text-red-500 text-sm mt-2"></p>

                  <ul id="customAgeOptions" class="glass-effect p-2 w-full text-white rounded-2xl mt-2 z-50 overflow-y-auto" style="
                        max-height: 0;
                        overflow: hidden;
                        opacity: 0;
                        transition: max-height 0.5s ease-in-out,
                          opacity 0.5s ease-in-out;
                      ">
                    <li class="cursor-pointer px-4 py-2 hover:bg-slate-100 w-[100%] text-black rounded">
                      Under 35
                    </li>
                    <li class="cursor-pointer px-4 py-2 hover:bg-white-100 text-black rounded">
                      35–44
                    </li>
                    <li class="cursor-pointer px-4 py-2 hover:bg-white/100 text-black rounded">
                      45–54
                    </li>
                    <li class="cursor-pointer px-4 py-2 hover:bg-white/100 text-black rounded">
                      55–64
                    </li>
                    <li class="cursor-pointer px-4 py-2 hover:bg-white/100 text-black rounded">
                      65 and older
                    </li>
                  </ul>
                </div>

                <div class="w-full">
                  <label for="annualIncome" class="block text-sm font-medium text-gray-300 mb-2">Annual Gross Income (Before Tax)</label>
                  <div class="relative">
                    <input type="number" id="annualIncome" class="input-field w-full pl-8 pr-4 py-4 bg-[#dfece6] border rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-[#f1f5f3] transition-all duration-200" placeholder="Enter income amount" min="0" />
                  </div>
                  <p id="annualIncomeError" class="error-message text-red-500 text-sm mt-2"></p>
                </div>
                <div class="w-full">
                  <label class="block text-sm font-medium text-gray-300 mb-2">Workplace retirement plan?</label>
                  <div class="flex items-center gap-3 text-sm">
                    <div class="w-[50%]">
                      <input id="includeRetirement" type="radio" name="retirementOption" value="yes" class="sr-only peer" />
                      <label for="includeRetirement" class="p-5 text-center rounded-xl  text-gray-700 opacity-60 cursor-pointer shadow-sm transition peer-checked:bg-[linear-gradient(to_right,#177F5B,#154D80)] peer-checked:!text-white peer-checked:opacity-100 bg-[#DFECE6]">Yes</label>
                    </div>

                    <div class="w-[50%]">
                      <input id="excludeRetirement" type="radio" name="retirementOption" value="no" class="sr-only peer" checked />
                      <label for="excludeRetirement" class="p-5 text-center rounded-xl bg-[#DFECE6] text-gray-700 opacity-60 cursor-pointer shadow-sm transition peer-checked:bg-[linear-gradient(to_right,#177F5B,#154D80)] peer-checked:!text-white peer-checked:opacity-100">No</label>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-5">
                <div id="retirement-percentage-section" class="flex flex-col input-group mt-4" style="
                      max-height: 0;
                      overflow: hidden;
                      opacity: 0;
                      transition: max-height 0.5s ease-in-out,
                        opacity 0.5s ease-in-out;
                    ">
                  <label for="retirementPercentage" class="text-white text-sm">Annual Retirement Contribution Percentage (0-10%)</label>
                  <div>
                    <input type="number" min="0" max="10" step="0.1" id="retirementPercentage" class="input-field w-full pl-8 pr-4 py-4 bg-[#dfece6] border border-white/20 rounded-xl mt-2 text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="E.g. 5 for 5%" />
                    <p id="retirementPercentageError" class="error-message text-red-500 text-sm mt-2"></p>
                    <p class="text-xs text-gray-500 mt-1">
                      Enter percentage of gross income (maximum 10%)
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- ÷first place i need to fix -->
        <!-- start here -->

        <!-- Deductions and Disposable Income Display -->

        <!-- end here -->

        <!-- Monthly Living Expenses Input -->

        <section id="living-expenses-section" class=" border-[1px] border-t-gray-300 glass-effect opacity-50 pointer-events-none p-4 md:p-4 transition-colors duration-500 ease-in-out">
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center space-x-3">
              <img src="images/expenditure.svg" alt="Income Icon" class="w-12 h-12 text-white" />
              <div class="relative flex items-center">
                <div class="flex flex-col">
                  <div class="flex items-center ">
                    <h2 class="text-[1.8rem] font-medium text-white">
                      Monthly Expenditure
                    </h2>
                  </div>
                  <!-- <span class="text-[.8rem] opacity-50">
                All monthly spending—bills, everyday costs, transportation,
                and debt payments.
              </span> -->
                </div>
              </div>
            </div>
            <button id="toggle-all-expenses" class="flex items-center gap-2 text-sm font-medium text-white/80 hover:text-white transition-colors duration-200 focus:outline-none">
              <span id="toggle-all-expenses-text">Expand all</span>
              <span class="flex flex-col items-center leading-none " aria-hidden="true">
                <!-- top chevron up -->
                <svg class="w-3 h-3 -m-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 11l7-7 7 7"></path>
                </svg>
                <!-- bottom chevron down -->
                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 13l-7 7-7-7"></path>
                </svg>
              </span>
            </button>
          </div>

          <div class="space-y-4">
            <div class="expense-category border-[1px] glass-effect border-b-gray-200 pb-2">
              <button class="category-toggle w-full flex items-center justify-between p-3 text-white border border-transparent transition-all duration-300 rounded-2xl" onclick="toggleCategory('housing')">
                <div class="flex items-center gap-3">
                  <h2 class="font-medium text-[1.5rem]">Housing and Utilities</h2>
                </div>
                <svg class="w-5 h-5 category-arrow transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>

              <div class="category-content overflow-hidden transition-all duration-500 ease-in-out max-h-0">
                <div class="p-3 pt-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Rent/Mortgage</label>
                      <input type="number" id="rent-mortgage" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Electricity</label>
                      <input type="number" id="electricity" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Water </label>
                      <input type="number" id="water" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Gas/Heating</label>
                      <input type="number" id="gas-heating" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Home Insurance</label>
                      <input type="number" id="home-insurance" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Others</label>
                      <input type="number" id="housing-others" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="expense-category border-[1px] glass-effect border-b-gray-200 pb-2">
              <button class="category-toggle w-full flex items-center justify-between p-3 text-white border transition-all duration-300 rounded-2xl" onclick="toggleCategory('living')">
                <div class="flex items-center gap-3">
                  <h2 class="font-medium text-[1.5rem]">Everyday Spending</h2>
                </div>
                <svg class="w-5 h-5 category-arrow transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>

              <div class="category-content overflow-hidden transition-all duration-500 ease-in-out max-h-0">
                <div class="p-3 pt-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Groceries</label>
                      <input type="number" id="groceries" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Subscriptions
                      </label>
                      <input type="number" id="subscriptions" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Phone Bills</label>
                      <input type="number" id="phone-bills" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Internet</label>
                      <input type="number" id="internet" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Clothing</label>
                      <input type="number" id="clothing" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Others</label>
                      <input type="number" id="living-others" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="expense-category glass-effect select-none border-[1px] border-b-gray-200 pb-2">
              <button class="category-toggle w-full flex items-center justify-between p-3 text-white transition-all duration-300 rounded-2xl" onclick="toggleCategory('transportation')">
                <div class="flex items-center gap-3">
                  <!-- <div class="w-8 h-8 bg-gradient-to-r from-green-400 to-green-600 rounded-lg flex items-center justify-center">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                </svg>
              </div> -->
                  <h2 class="font-medium text-[1.5rem]">Transportation</h2>

                </div>
                <svg class="w-5 h-5 category-arrow transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>

              <div class="category-content overflow-hidden transition-all duration-500 ease-in-out max-h-0">
                <div class="p-3 pt-4">
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Car Payment</label>
                      <input type="number" id="car-payment" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Gas/Fuel</label>
                      <input type="number" id="gas-fuel" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Car Insurance
                      </label>
                      <input type="number" id="car-insurance" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Public Transit
                      </label>
                      <input type="number" id="public-transit" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Car Maintenance
                      </label>
                      <input type="number" id="car-maintenance" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Others</label>
                      <input type="number" id="transport-others" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="expense-category glass-effect border-[1px] border-b-gray-200 pb-2">
              <button class="category-toggle w-full flex items-center justify-between p-3 text-white transition-all duration-300 rounded-2xl" onclick="toggleCategory('loans')">
                <div class="flex items-center gap-3">
                  <!-- <div class="w-8 h-8 bg-gradient-to-r from-red-400 to-red-600 rounded-lg flex items-center justify-center">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                </svg>
              </div> -->
                  <h2 class="font-medium text-[1.5rem]">Loans and Insurance</h2>

                </div>
                <svg class="w-5 h-5 category-arrow transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>

              <div class="category-content overflow-hidden transition-all duration-500 ease-in-out max-h-0">
                <div class="p-3">
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Student Loan

                        <input type="number" id="student-loans" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Credit Card</label>
                      <input type="number" id="credit-cards" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Personal Loan
                      </label>
                      <input type="number" id="personal-loans" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Life Insurance
                      </label>
                      <input type="number" id="life-insurance" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Line of Credit
                      </label>
                      <input type="number" id="line-of-credit" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Others</label>
                      <input type="number" id="loan-others" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="expense-category glass-effect border-[1px] border-b-gray-200 pb-2">
              <!-- border border-transparent bg-gradient-to-r from-green-200 to-emerald-200 -->
              <button class="category-toggle w-full flex items-center justify-between p-3 text-white transition-all duration-300 rounded-2xl" onclick="toggleCategory('children')">
                <div class="flex items-center gap-3">
                  <!-- <div class="w-8 h-8 bg-gradient-to-r from-pink-400 to-pink-600 rounded-lg flex items-center justify-center">
                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253z"></path>
                </svg>
              </div> -->
                  <h2 class="font-medium text-[1.5rem]">Children and Education</h2>

                </div>
                <svg class="w-5 h-5 category-arrow transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>

              <div class="category-content overflow-hidden transition-all duration-500 ease-in-out max-h-0">
                <div class="p-3">
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Tuition</label>
                      <input type="number" id="school-tuition" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Childcare</label>
                      <input type="number" id="childcare" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">School Supplies
                      </label>
                      <input type="number" id="school-supplies" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Kids Activities
                      </label>
                      <input type="number" id="kids-activities" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Education Savings
                      </label>
                      <input type="number" id="education-savings" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Others </label>
                      <input type="number" id="children-others" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="expense-category glass-effect border-[1px] border-b-gray-200">
              <button class="category-toggle w-full flex items-center justify-between p-3 text-white transition-all duration-300 rounded-2xl" onclick="toggleCategory('miscellaneous')">
                <div class="flex items-center gap-3">
                  <h2 class="font-medium text-[1.5rem]">Miscellaneous Expenses</h2>

                </div>
                <svg class="w-5 h-5 category-arrow transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>

              <div class="category-content overflow-hidden transition-all duration-500 ease-in-out max-h-0">
                <div class="p-3">
                  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Health/Fitness
                      </label>
                      <input type="number" id="healthcare" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Entertainment
                      </label>
                      <input type="number" id="entertainment" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Dining Out </label>
                      <input type="number" id="dining-out" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>

                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Pets </label>
                      <input type="number" id="pets" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Gifts & Donations
                      </label>
                      <input type="number" id="gifts-donations" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                    <div class="input-group">
                      <label class="block text-sm font-medium text-gray-300 mb-2">Others </label>
                      <input type="number" id="misc-others" class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="Enter amount" min="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <div id="integrated-expense-summary" class="mt-2 glass-effect rounded-xl text-white hidden animate-slide-up">
            <div class="mx-auto px-6 hidden py-2 rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200 flex flex-col justify-center space-y-2">
              <p id="currentZoneMessage" class="-mb-2 status-message text-white text-base italic text-center"></p>
              <div class="budget-progress-container -mt-14 -mb-2">
                <div class="progress-bar-wrapper flex flex-col gap-2">
                  <div class="progress-bar-labels hidden">
                    <span class="progress-label left">0%</span>
                    <span class="progress-label center">70%</span>
                    <span class="progress-label right">85%</span>
                    <span class="progress-label far-right">100%</span>
                  </div>
                  <div class="budget-progress-bar hidden">
                    <div class="budget-zone green-zone" data-tooltip="Your lifestyle spending sits well below your take-home pay, a healthy gap that keeps cashflow positive. You can save and invest consistently while staying flexible for surprises. Keep habits steady and watch for lifestyle creep—avoid amber (cutting it close) and red (overspending).">
                      <div class="zone-gradient"></div>
                    </div>
                    <div class="budget-zone amber-zone" data-tooltip="Your lifestyle spending is close to your take-home, leaving little room to save and making investing difficult. Tighten a few lifestyle choices—Spend less on wants and cut back on extras—to move into green. If lifestyle costs rise, you could slip into red.">
                      <div class="zone-gradient"></div>
                    </div>
                    <div class="budget-zone red-zone" data-tooltip="Your lifestyle spending is over 85% of your take-home, leaving little to no cashflow or savings—investing isn't feasible right now thus increasing the risk of relying on debt. Cut non-essentials, lower big bills, and reset lifestyle priorities to move to amber, then green.">
                      <div class="zone-gradient"></div>
                    </div>
                    <div class="progress-indicator" id="progressIndicator">
                      <div class="indicator-dot"></div>
                      <div class="indicator-line"></div>
                      <div class="indicator-value" id="indicatorValue">
                        0%
                      </div>
                    </div>
                  </div>
                  <div class="tooltip-boxes hidden">
                    <div class="tooltip-box healthy-box" data-tooltip="Your lifestyle spending sits well below your take-home pay, a healthy gap that keeps cashflow positive. You can save and invest consistently while staying flexible for surprises. Keep habits steady and watch for lifestyle creep—avoid amber (cutting it close) and red (overspending).">
                      <div class="box-label">Healthy</div>
                    </div>
                    <div class="tooltip-box caution-box" data-tooltip="Your lifestyle spending is close to your take-home, leaving little room to save and making investing difficult. Tighten a few lifestyle choices—Spend less on wants and cut back on extras—to move into green. If lifestyle costs rise, you could slip into red.">
                      <div class="box-label">Caution</div>
                    </div>
                    <div class="tooltip-box critical-box" data-tooltip="Your lifestyle spending is over 85% of your take-home, leaving little to no cashflow or savings—investing isn't feasible right now thus increasing the risk of relying on debt. Cut non-essentials, lower big bills, and reset lifestyle priorities to move to amber, then green.">
                      <div class="box-label">Critical</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mt-1 hidden">
                <p class="text-lg text-center font-medium mb-1">
                  <strong>Total Monthly Expenses</strong>
                </p>
                <p class="text-3xl font-bold text-center mb-2">
                  <span id="currentTotalExpenses" class="text-3xl font-bold">$0.00</span>
                  (<span class="text-3xl font-bold" id="currentExpensesPercentage">0.0%</span>)
                </p>
              </div>
            </div>

            <div class="w-full mt-4 px-6 py-4 bg-white/5 hidden border border-white/20 rounded-2xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200 flex flex-col">
              <p class="text-lg font-medium mb-2">
                <strong>Budget Zone:</strong>
              </p>
              <span id="currentBudgetZone" class="status-badge text-3xl font-bold text-center">N/A</span>
            </div>
          </div>
          <!-- this cocde is a dead code and i can't delete it yet because somehwere in javascript is using it -->
        </section>

        <!-- Savings & Investments Input - Updated Layout -->
        <section id="savings-investments-section" class=" opacity-50 border-[1px] border-t-border-t-gray-300 pointer-events-none p-8 rounded-b-3xl text-white transition-all duration-300 backdrop-blur-sm shadow-lg bg-white">
          <h2 class="text-[1.8rem] md:text-3xl font-medium text-white mb-6 pb-4 border-gray-300 flex items-center gap-2">
            <img src="images/savings.svg" alt="Savings Icon" class="w-12 h-12 text-white" />
            <span class="text-white"></span> Savings and Investments

            <div id="infoButton" class="focus:outline-none pointer-events-auto" onclick="document.getElementById('infoPopup').classList.remove('hidden')">
              <span class="text-[1rem]" aria-hidden="true" style="color:#000; font-weight:400;">ⓘ</span>
            </div>
          </h2>

          <!-- Popup Overlay -->
          <div id="infoPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl transform transition-all duration-300 scale-95">
              <div class="text-center">
                <div class="mb-4">
                  <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <h3 class="text-xl font-bold text-gray-900 mb-2">
                    Allocation Plan & Projections
                  </h3>
                  <p class="text-gray-700 leading-relaxed mb-6">
                    Our budget calculator recommends allocating your surplus
                    as follows:
                    <strong>10% to a cashflow buffer, 5–15% to savings, and 10–20%
                      to investing</strong>
                    and —a simple path to sustainable growth and long-term
                    financial wellness.
                  </p>
                  <div class="bg-blue-50 p-4 rounded-lg mb-6">
                    <p class="text-sm text-blue-800">
                      <strong>Pro Tip: Allocation Strategy Varies by Zone</strong>
                      <br /><br />
                      <strong>Green (below 70% of take-home)</strong> —
                      Expenses are low enough that the surplus typically funds
                      all three steps. <br /><br />
                      <strong>Amber (70–85%)</strong> — Surplus first covers
                      the cashflow buffer, then savings; then investing only
                      if surplus remains. <br /><br />
                      <strong>Red (above 85%)</strong> — Limited or No
                      Surplus. Allocations begin once a surplus exists,
                      flowing to the cashflow buffer first, and then savings.
                      No investing capacity.
                    </p>
                  </div>
                </div>
                <button id="closePopup" class="w-full bg-blue-600 hover:bg-blue-700 !text-white font-medium py-3 px-6 rounded-xl transition-colors duration-200">
                  Got it, thanks!
                </button>
              </div>
            </div>
          </div>
          <p id="si-guidance" class="text-white/90 text-base mb-3 leading-relaxed">
            You can choose to either set your custom savings and investments goals, or use our recommendations.
          </p>

          <!-- Unified Savings & Investments Form -->
          <div id="unifiedAllocations" class="space-y-6 flex flex-col w-[100%] mt-4">
            <!-- Savings -->
            <div class="space-y-3">
              <div class="flex justify-between">
                <label class="block text-sm font-medium text-white/80">Monthly Savings percentage(%)</label>
                <label class="block text-sm mr-32 font-medium text-white/80">Monthly Savings amount($)</label>
              </div>
              <div class="grid grid-cols-2 gap-3">
                <div class="input-group">
                  <input type="number" id="savingsPercentage" class="input-field opacity-70 w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="0" min="0" value="" />
                </div>
                <div class="input-group">
                  <input type="text" id="customSavingsAmount" class="input-field opacity-70 w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="$0.00" value="" />
                </div>
              </div>
              <p id="savingsPercentageError" class="error-message text-sm text-red-400"></p>
            </div>

            <!-- Allocation Error Message -->
            <div id="allocationError" class="hidden text-red-400 text-sm p-3 bg-red-900/30 rounded-lg border border-red-500/50">
              <!-- Error message will be inserted here by JavaScript -->
            </div>

            <!-- Investments -->
            <div class="space-y-3">
              <div class="flex justify-between">
                <label class="block text-sm font-medium text-white/80">Monthly investment percentage(%)</label>
                <label class="block text-sm mr-32 font-medium text-white/80">Monthly investment Amount ($)</label>
              </div>
              <div class="grid grid-cols-2 gap-3">
                <div class="input-group">
                  <input type="number" id="investmentsPercentage" class="input-field opacity-70 w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="0" min="0" value="" />
                </div>
                <div class="input-group">
                  <input type="text" id="customInvestmentsAmount" class="input-field opacity-70 w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200" placeholder="$0.00" value="" />
                </div>
              </div>
              <p id="investmentsPercentageError" class="error-message text-sm text-red-400"></p>
            </div>

            <!-- Cashflow (derived) -->
            <div class="space-y-3">
              <label class="block text-sm font-medium text-white/80">Your calculated Monthly Cashflow</label>
              <div class="input-field w-full pl-4 pr-4 py-3 border border-transparent hover:border-[#57f2a9] bg-[#dfece6] rounded-xl text-white placeholder-gray-400 focus:outline-none focus:border-primary input-glow transition-all duration-200">
                <span id="customCashflowAmount" class="text-white">$0.00</span>
                <span id="customCashflowPercentage" class="text-red">(0.0%)</span>
              </div>
            </div>
          </div>

          <!-- Centered CTA Section -->
          <div class="mt-8 flex justify-center">
            <div id="recommended-cashflow-cta" class="w-full  flex flex-col gap-4">
              <p id="cta-message" class="text-center text-slate-800 text-base font-medium leading-relaxed">
                <!-- This content will be set by JavaScript -->
              </p>

              <!-- Outlined gradient button -->
              <button id="cta-reset-btn" type="button" class="w-full rounded-xl p-[1px] bg-[linear-gradient(to_right,#177F5B,#154D80)] border-[1px] hover:opacity-90 transition">
                <span class="block w-full rounded-xl bg-white px-6 py-3 text-[#177F5B] font-thin">
                  Reset to recommended numbers
                </span>
              </button>

              <!-- Filled gradient button -->
              <a href="index.html#contact-us" id="recommended-nav_cta" class="w-full px-6 text-center py-3 rounded-xl font-medium !text-white bg-[linear-gradient(to_right,#177F5B,#154D80)] hover:opacity-90 transition shadow-md">
                Talk to an expert
              </a>
            </div>
          </div>
        </section>
      </div>
      <!-- right side -->
      <div id="deductions-disposable-section" class="rounded-3xl p-5 w-full lg:w-[40%] lg:sticky lg:top-24 self-start bg-white border border-white/10 hover:border-primary/30 transition-all duration-300 result-box hidden animate-slide-up z-40">
        <div id="deductions-nav" class="flex items-center pl-6 py-2 font-medium text-[1rem]  gap-10 bg-[#eef5f1] py-1 rounded-md text-[.8rem]">
          <button type="button" data-tab="taxes" class="deductions-tab px-6 py-3 rounded-md bg-[#dbece6] text-slate-800 ">
            Taxes
          </button>
          <button type="button" data-tab="expenses" class="deductions-tab px-6 py-3 rounded-md text-slate-800 hover:bg-gray-100">
            Expenses
          </button>
          <button type="button" data-tab="save" class="deductions-tab px-4  py-3 rounded-md text-sm text-slate-800 hover:bg-gray-100">
            Save & Invest
          </button>
        </div>

        <div id="taxes-content" class="mt-4">
          <span class="text-[.9rem]">Tax percentages shown are estimates based on current rates from
            the CRA website.</span>
          <div id="taxes-progress" class="mb-6 mt-5">
            <div class="w-full h-3 bg-slate-100 rounded-full overflow-hidden">
              <div id="taxes-bar-segments" class="flex h-full"></div>
            </div>
          </div>
          <div id="deduction-inputs-container" class="flex flex-col gap-x-6 gap-y-4 text-white transition-all duration-500 ease-in-out"></div>
        </div>
        <div id="expenses-content" class="hidden mt-4">
          <span class="text-[.9rem]">Progress bar shows how healthy your expense percentage is compared to your monthly take home pay.</span>
          <style>
            .legend {
              list-style: none;
              padding: 0;
              margin: 0;
            }

            .legend-item {
              display: flex;
              align-items: center;
              gap: 8px;
              margin: 6px 0;
            }

            .legend-color {
              width: 10px;
              height: 10px;
              border-radius: 2px;
              display: inline-block;
            }

            .legend-text {
              margin: 0;
              font-size: 14px;
              font-weight: 100;
            }

            .legend-info {
              margin-left: 6px;
              color: #333434;
            }

            /* Progress bar styles with full-zone gradient */
            .expense-health-progress {
              margin-top: 8px;
            }

            .expense-health-labels {
              display: flex;
              justify-content: space-between;
              align-items: baseline;
              font-size: 14px;
              color: #1f2937;
            }

            .expense-health-bar {
              position: relative;
              width: 100%;
              height: 20px;
              border-radius: 9999px;
              overflow: hidden;
              background: linear-gradient(to right,
                  #21a34f 0%,
                  #21a34f 64%,
                  #38b165 69%,
                  #b8cf42 72%,
                  #f2c94c 75%,
                  #f2c94c 83%,
                  #ff9f1a 88%,
                  #f05a49 92%,
                  #eb5757 96%,
                  #eb5757 100%);
              box-shadow: inset 0 0 0.5px rgba(0, 0, 0, 0.08);
            }

            /* Overlay for unused area (right side) */
            .expense-health-fill {
              position: absolute;
              right: 0;
              top: 0;
              height: 100%;
              width: 0%;
              background: rgba(229, 231, 235, 0.9);
              border-radius: 9999px;
              transition: width 350ms ease;
            }
          </style>

          <div class="flex flex-col py-4 gap-3">
            <div class="flex gap-2 items-center">
              <span class="w-[12px] h-[12px] rounded-sm" style="background:#21a34f;"></span>

              <h2 class="text-[1rem] font-thin opacity-80" style="color:#2b2a2a; -webkit-text-fill-color:#2b2a2a; font-weight:100;">Healthy (from 0% to 70%)</h2>

              <span class="text-[.6rem]" aria-hidden="true" style="color:#000; font-weight:400;">&#9432;</span>
            </div>
            <div class="flex gap-2 items-center">
              <span class="w-[12px] h-[12px] rounded-sm" style="background:#f2c94c;"></span>
              <h2 class="text-[1rem] opacity-80 font-thin" style="color:#2b2a2a; -webkit-text-fill-color:#2b2a2a; font-weight:100;">Caution (from 70% to 85%)</h2>
              <span class="text-[.6rem]" aria-hidden="true" style="color:#000; font-weight:400;">&#9432;</span>
            </div>
            <div class="flex gap-2  items-center">
              <span class="w-[12px] h-[12px] rounded-sm" style="background:#eb5757;"></span>
              <h2 class="text-[1rem] opacity-80 font-thin" style="color:#2b2a2a; -webkit-text-fill-color:#2b2a2a; font-weight:100;">Critical (from 85% to 100%)</h2>
              <span class="text-[.6rem]" aria-hidden="true" style="color:#000; font-weight:400;">&#9432;</span>
            </div>
          </div>

          <!-- Progress bar with zone gradient; grey overlay covers unused -->
          <div class="expense-health-progress" aria-label="Expense health progress">
            <div class="expense-health-labels">
              <span id="expenseUsedText" class="gradient-text"><span id="expenseUsedValue" class="text-[1.8rem] font-medium">0%</span> <span class="text-[1rem]">used</span></span>
              <span id="expenseLeftText" class="gradient-text text-[1rem] font-medium">$0.00 left of $0.00</span>
            </div>
            <div class="expense-health-bar">
              <div id="expenseHealthBar" class="expense-health-fill"></div>
            </div>
          </div>
          <div class="expense-summary flex flex-col gap-4 mt-5" id="expense-category-summary ">
            <div class="expense-summary-row flex justify-between">
              <div class="">
                <span class="expense-summary-name font-thin text-gray-500">Housing and utilities (<span id="summary-housing-pct">0%</span>)</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin" id="summary-housing-amt">$0.00</span>
            </div>
            <div class="expense-summary-row flex justify-between">
              <div>
                <span class="expense-summary-name font-thin text-gray-500">Everyday spending (<span id="summary-living-pct">0%</span>)</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin" id="summary-living-amt">$0.00</span>
            </div>
            <div class="expense-summary-row flex justify-between">
              <div>
                <span class="expense-summary-name font-thin text-gray-500">Transportation (<span id="summary-transportation-pct">0%</span>)</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin" id="summary-transportation-amt">$0.00</span>
            </div>
            <div class="expense-summary-row flex justify-between">
              <div>
                <span class="expense-summary-name font-thin text-gray-500">Loans and insurance (<span id="summary-loans-pct">0%</span>)</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin" id="summary-loans-amt">$0.00</span>
            </div>
            <div class="expense-summary-row flex justify-between">
              <div>
                <span class="expense-summary-name font-thin text-gray-500">Children and education (<span id="summary-children-pct">0%</span>)</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin id=" summary-children-amt">$0.00</span>
            </div>
            <div class="expense-summary-row flex justify-between">
              <div>
                <span class="expense-summary-name font-thin text-gray-500">Miscellaneous (<span id="summary-miscellaneous-pct">0%</span>)</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin" id="summary-miscellaneous-amt">$0.00</span>
            </div>
            <div class="expense-summary-row flex justify-between">
              <div>
                <span class="expense-summary-name font-thin text-gray-500">Total Monthly Expenses</span>
                <span class="expense-summary-line"></span>
              </div>
              <span class="expense-summary-amount font-thin" id="summary-total-expenses">$0.00</span>
            </div>
          </div>
        </div>

        <div id="save-invest-content" class="hidden mt-4">
          <div class="space-y-6">
            <!-- Custom tabs -->
            <div class="flex gap-3">
              <button id="customSavingsChartBtn" class="flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer duration-300 bg-[#dbece6] text-black">
                Savings
              </button>
              <button id="customInvestmentsChartBtn" class="flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer duration-300 bg-[#dbece6] text-black">
                Investments
              </button>
              <button id="customBothChartBtn" class="flex-1 px-4 py-3 rounded-lg font-medium cursor-pointer duration-300 bg-[#dbece6] text-black">
                Both
              </button>
            </div>

            <!-- Tabbed views -->
            <div class="flex flex-col space-y-10">

              <!-- Savings view -->
              <div id="customSavingsView" class="space-y-3">
                <p id="customSavingsTitle" class="text-sm text-gray-700"></p>
                <div class="flex justify-center items-center">
                  <canvas id="customSavingsPieChart" class="!w-[150px] !h-[150px]" width="160" height="160"></canvas>
                </div>
                <div id="customSavingsProjectionSummary" class="p-0"></div>
              </div>

              <!-- Investments view -->
              <div id="customInvestmentsView" class="space-y-3 hidden">
                <p id="customInvestmentsTitle" class="text-sm text-gray-700"></p>
                <div class="flex justify-center items-center">
                  <canvas id="customInvestmentsPieChart" class="!w-[150px] !h-[150px]" width="160" height="160"></canvas>
                </div>
                <div id="customInvestmentsProjectionSummary" class="p-0"></div>
              </div>

              <!-- Both (combined) view -->
              <div id="customBothView" class="space-y-3 hidden">
                <p id="customBothTitle" class="text-sm text-gray-700"></p>
                <div class="flex justify-center items-center">
                  <canvas id="customBothPieChart" class="!w-[150px] !h-[150px]" width="160" height="160"></canvas>
                </div>
                <div id="customBothProjectionSummary" class="p-0"></div>
              </div>
            </div>

            <button id="AllocationsBtn" class="w-full px-4 py-3 rounded-lg font-medium !text-white transition-all duration-300 shadow-md bg-[linear-gradient(to_right,#177F5B,#154D80)] hover:opacity-90 transition shadow-md">
              Allocations
            </button>

            <div id="infoPopup2" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
              <div class="bg-white rounded-2xl p-8 max-w-md mx-4 shadow-2xl transform transition-all duration-300 scale-95">
                <div class="text-center">
                  <div class="mb-4">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                      <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                      </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-2">
                      Custom Allocation
                    </h3>
                    <p class="text-gray-700 leading-relaxed mb-6">
                      Personalise your allocations and adjust the mix to
                      explore different end goals.
                    </p>
                    <p>
                      Monthly Savings
                      <br />
                      Monthly Investment
                      <br />
                      Monthly Cashflow
                    </p>
                    <div class="bg-blue-50 p-4 rounded-lg mb-6">
                      <p class="text-sm text-blue-800">
                        <strong>Custom Projection</strong> - 5-year view
                        on your personalised projection using
                        <strong>3% for Savings</strong>,
                        <strong>10% for Investing </strong> and
                        <strong>6.5% for both</strong>.
                      </p>
                    </div>
                  </div>
                  <button id="closePopup2" class="w-full bg-blue-600 hover:bg-blue-700 !text-white font-medium py-3 px-6 rounded-xl transition-colors duration-200">
                    Got it, thanks!
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Print/Download button -->
        <div class="mt-6">
          <button id="print-download-btn" class="w-full flex items-center justify-center gap-3 px-6 py-3 rounded-2xl bg-[linear-gradient(to_right,#177F5B,#154D80)] hover:opacity-90 transition shadow-md text-white">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 8V6a2 2 0 00-2-2H10a2 2 0 00-2 2v2M6 12H5a2 2 0 00-2 2v3a2 2 0 002 2h1m12-7h1a2 2 0 012 2v3a2 2 0 01-2 2h-1M6 19h12v-7H6v7z" />
            </svg>
            <span style="color:#fff !important; -webkit-text-fill-color:#fff !important;">Print or download results</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="data/province.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="./js/budget-calculator-script.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js" type="text/javascript"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script>
    //Stop body from scrolling when menu button is clicked
    $(".nav_button").on("click", function() {
      $("body").toggleClass("no-scroll");
    });
  </script>
  <script>
    // Ensure the navbar closes and icon reverts when a menu link is clicked
    $(".nav_menu_link:not(#calculatorToggle), .nav_cta").on(
      "click",
      function() {
        // Simulate a click on the nav_button to trigger Webflow's built-in close animation
        $(".nav_button").click();
      }
    );
  </script>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const calculatorToggle = document.getElementById("calculatorToggle");
      const calculatorDropdown =
        document.getElementById("calculatorDropdown");
      const navMenu = document.querySelector(".nav_menu"); // Assuming this is your main navigation menu

      if (calculatorToggle && calculatorDropdown && navMenu) {
        calculatorToggle.addEventListener("click", function(event) {
          event.preventDefault();
          event.stopPropagation(); // Prevent this click from immediately closing the dropdown via the window listener
          calculatorDropdown.classList.toggle("show");
        });

        // Close the dropdown if the user clicks outside of it, but not if clicking inside the nav menu itself
        window.addEventListener("click", function(event) {
          if (
            !calculatorToggle.contains(event.target) &&
            !calculatorDropdown.contains(event.target) &&
            !navMenu.contains(event.target)
          ) {
            calculatorDropdown.classList.remove("show");
          }
        });

        // Prevent clicks inside the dropdown from closing it
        calculatorDropdown.addEventListener("click", function(event) {
          event.stopPropagation();
        });
      }
    });
  </script>
</body>

</html>